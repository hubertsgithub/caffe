here is a brief description about the implementation. The whole thing relies on the following libraries which you need to have installed on your computer,

1) opencv-2.1.0, the version I used. More advanced version should also work, I have not tried, though.
2) ann - 1.1.2, 64-MS-64bit version. 
3) Matlab - 2009(b) -- later version should work
4) boost - 1.44.0

You should be able to see all these dependencies by referring to the project properties. You need to modify the paths of all dependent packages so that they point to your local locations. 

After running through all configurations and being able to get things compiled, you can run the generated binary executable under command line. It will print the arguments it expects along with explanations. It should be clear enough to let you run your own examples:-)



Please refer to the corresponding publication for details on the algorithm.


A Closed-Form Solution to Retinex with Nonlocal Texture Constraints
Qi Zhao, Ping Tan, Qiang Dai, Li Shen, Enhua Wu, Stephen Lin,
IEEE Transaction on Pattern Analysis and Machine Intelligence
Volume 34, Issue 7, Pages 1437--1444
http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6175903&tag=1


Please let me know if you have any question. Email is a good way to reach me.

manazhao@gmail.com
Qi Zhao